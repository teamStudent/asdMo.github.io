require=function t(e,i,c){function o(a,s){if(!i[a]){if(!e[a]){var r="function"==typeof require&&require;if(!s&&r)return r(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,c)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<c.length;a++)o(c[a]);return o}({Audio:[function(require,module,exports){"use strict";cc._RFpush(module,"34decHRQ0ZKMLg4TMbb7kES","Audio"),cc.Class({"extends":cc.Component,properties:{bgm_1:cc.Node,bgm_2:cc.Node,sfx_click:cc.AudioClip,sfx_success:cc.AudioClip,sfx_touch:cc.AudioClip},onLoad:function(){this.audioPool=[]},playEffect:function playEffect(name){if("false"!=ls.getItem(wl.effectStatus)){var clip=eval("this.sfx_"+name);clip&&this._playSFX(clip)}},_playSFX:function(t){var e=cc.audioEngine.play(t,!1);this.audioPool.push(e)},update:function(){for(var t=0;t<this.audioPool.length;t++){var e=this.audioPool[t],i=cc.audioEngine.getState(e);i<0&&(this.audioPool.splice(t,1),t--)}},playMusic:function(){"true"==ls.getItem(wl.musicStatus)&&(this.stopAll(),cc.audioEngine.play(this.bgm,!0,.3))},playbgm:function(){if("true"==ls.getItem(wl.musicStatus)){var t=this.bgm_1.getComponent(cc.AudioSource);t.stop();var e=this.bgm_2.getComponent(cc.AudioSource);switch(e.stop(),wl.getRandomInt(1,2)){case 1:t.play();break;case 2:e.play()}}},stopbgm:function(){var t=this.bgm.getComponent(cc.AudioSource);t.stop();var e=this.bgm_2.getComponent(cc.AudioSource);e.stop()},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},stopAll:function(){cc.audioEngine.stopAll()},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RFpop()},{}],Base:[function(t,e,i){"use strict";cc._RFpush(e,"cf37f7l+JlG+5T0SDXLbSDH","Base"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},initProperties:function(){},init:function(){},setInteractable:function(t,e){t.getComponent(cc.Button).interactable=e},isInteractable:function(t){return t.getComponent(cc.Button).interactable},loadKeyboardEvent:function(){}}),cc._RFpop()},{}],Gmae:[function(t,e,i){"use strict";cc._RFpush(e,"c3cb8G4TxtHJbIDrEZN5Qak","Gmae");var c="0",o="org/cocos2dx/javascript/ImagePicker";window.onImageSaved=function(t){cc.eventManager.dispatchCustomEvent("ImagePickerEvent",{p:t})};var n=3,a=3,s=2,r=100,l=0,u=.1,h=[360,300,240,180,120,60];cc.Class({"extends":t("SceneBase"),properties:{debugLabel:cc.Label,img1:cc.Node,helloNode:cc.Node,node1:cc.SpriteFrame,mapbg:cc.Node,lbStep:cc.Label,lbTime:cc.Label,levelNode:cc.Node,lbWinStep:cc.Label,lbWinTime:cc.Label,lbDownCount:cc.Label,failLvNum:cc.Node,btnPlay:cc.Node,btnUpload:cc.Node,uploadLayer:cc.Node,nodeArr:[cc.Node],levelPic:[cc.SpriteFrame],levelNumPic:[cc.SpriteFrame],btnGrid9:[cc.Node],btnGrid16:[cc.Node],mapPic:[cc.SpriteFrame]},onLoad:function(){this._super(),this.addListener(),this.setLayerZor(),this.setLayerShow(),this.updateLabel(),this.node.getChildByName("homeLayer").active=!0;var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,c=t.getDate();cc.log(e+"年"+i+"月"+c+"日,星期"+(+t.getDay()+1)),this._isSyartGame=!0,i>=4&&c>=3&&(this._isSyartGame=!1),audio.playbgm()},setLayerZor:function(){this.node.getChildByName("startLayer").zIndex=5,this.node.getChildByName("homeLayer").zIndex=10,this.node.getChildByName("winLayer").zIndex=6,this.node.getChildByName("failLayer").zIndex=6,this.node.getChildByName("sucLayer").zIndex=6,this.node.getChildByName("img_bg_bg1").zIndex=4,this.node.getChildByName("testWin").zIndex=15},setLayerShow:function(){this.node.getChildByName("sucLayer").active=!1,this.node.getChildByName("startLayer").active=!0,this.node.getChildByName("failLayer").active=!1,this.node.getChildByName("winLayer").active=!1,cc.sys.os==cc.sys.OS_ANDROID,this.img1.zIndex=-1,this.img1.getComponent(cc.Sprite).spriteFrame=this.mapPic[wl.lv-1],this.img1.active=!1,this.btnPlay.stopAllActions(),this.btnPlay.x=-size.width,this.btnPlay.runAction(cc.sequence(cc.moveTo(1,0,0).easing(cc.easeBounceOut()),cc.delayTime(2),cc.callFunc(function(){this.btnCallPlay()},this)))},initProperties:function(){this._texture=null,this._mapArr=tool.matrix(n,a,null),r=(this.img1.width-(n-1)*s)/n;var t=(size.width-this.img1.width)/2-size.width/2,e=size.height/2-this.img1.height/2+this.mapbg.y-88;this._leftUpPos=cc.p(t,e),this._isCanTouch=!0,this._isBeginGame=!1,this._nullRow=n-1,this._nullCol=a-1,this._step=0,this._curGrid=9},init:function(){audio.playbgm(),1===l&&(wl.lv=wl.getItemInt(wl.curLevel)),wl.log("初始化第"+wl.lv+"关"),this.setLayerShow(),this.initProperties(),cc.loader.loadRes("map/img"+wl.lv,function(t,e){this._texture=e,this.node.getChildByName("homeLayer").active=!1,this.updateLabel(),this.initMap(),this.showTag()}.bind(this))},initGame:function(){n=3,a=3,this.setLayerShow(),this.initProperties(),this.updateLabel()},initMap:function(){for(var t=0,e=[],i=0;i<n;i++)for(var c=0;c<a&&(i!=n-1||c!=a-1);c++){t++;var o=new cc.SpriteFrame(this._texture,cc.rect(r*c+c*s,r*i+i*s,r,r)),l=new cc.Node("sp");l.parent=this.node;var u=l.addComponent(cc.Sprite);u.spriteFrame=o,l.width=r,l.height=r,l.row=i,l.col=c,l.tag=t,l.setPosition(this._leftUpPos.x+(r+s)*c+r/2,this._leftUpPos.y-(r+s)*i-r/2),l.on("touchstart",this.blockTouchStart,this),e.push(l)}for(var h=0,d=e.length;h<d;h++){var m=parseInt(Math.random()*d);e[h]=[e[m],e[m]=e[h]][0]}for(var p=0,f=0;f<n;f++)for(var c=0;c<a&&(f!=n-1||c!=a-1);c++){this._mapArr[f][c]=e[p];var l=this._mapArr[f][c];l.row=f,l.col=c,l.setPosition(this._leftUpPos.x+(r+s)*c+r/2,this._leftUpPos.y-(r+s)*f-r/2),p++}this.randomPos()},blockTouchStart:function(t){var e=t.target;this._mapArr[e.row][e.col];if(this._isCanTouch){audio.playEffect("touch");var i=e.row,c=e.row,o=e.col,l=e.col,h=null;if(--i>=0&&!this._mapArr[i][e.col]?(e.row=i,this._mapArr[i][e.col]=e,this._mapArr[++i][e.col]=null,h=cc.moveTo(u,e.x,e.y+r+s)):++c<n&&!this._mapArr[c][e.col]?(e.row=c,this._mapArr[c][e.col]=e,this._mapArr[--c][e.col]=null,h=cc.moveTo(u,e.x,e.y-r-s)):--o>=0&&!this._mapArr[e.row][o]?(e.col=o,this._mapArr[e.row][o]=e,this._mapArr[e.row][++o]=null,h=cc.moveTo(u,e.x-r-s,e.y)):++l<a&&!this._mapArr[e.row][l]&&(e.col=l,this._mapArr[e.row][l]=e,this._mapArr[e.row][--l]=null,h=cc.moveTo(u,e.x+r+s,e.y)),h){this._isCanTouch=!1;var d=cc.callFunc(function(){this._isCanTouch=!0,this.checkWin()},this);e.runAction(cc.sequence(h,d))}}},showTag:function(){},randomPos:function(){if(!this._isBeginGame){var t=0,e=0,i=null;switch(wl.getRandomInt(0,3)){case 0:t=this._nullRow-1,e=this._nullCol,t<0?this.resetRandomPos():(i=this._mapArr[t][e],i.row=this._nullRow,i.setPosition(i.x,i.y-r-s));break;case 1:t=this._nullRow+1,e=this._nullCol,t>=n?this.resetRandomPos():(i=this._mapArr[t][e],i.row=this._nullRow,i.setPosition(i.x,i.y+r+s));break;case 2:t=this._nullRow,e=this._nullCol-1,e<0?this.resetRandomPos():(i=this._mapArr[t][e],i.col=this._nullCol,i.setPosition(i.x+r+s,i.y));break;case 3:t=this._nullRow,e=this._nullCol+1,e>=a?this.resetRandomPos():(i=this._mapArr[t][e],i.col=this._nullCol,i.setPosition(i.x-r-s,i.y))}i&&(this._mapArr[this._nullRow][this._nullCol]=i,this._mapArr[t][e]=null,this._nullRow=t,this._nullCol=e,this.resetRandomPos())}},resetRandomPos:function(){this.scheduleOnce(function(){this.randomPos()},.02)},checkWin:function(){this._step++,this.lbStep.string=this._step;for(var t=[],e=0;e<n;e++)for(var i=0;i<a;i++)t.push(this._mapArr[e][i]);for(var c=!0,o=0,s=n*a-1,r=0;r<s-1;r++){var l=t[r],u=t[r+1];(!l||!u||l.tag>u.tag)&&(o++,c=!1)}c&&this.doWin()},doWin:function(){if(wl.log("胜利"),6==wl.lv&&1===l)ls.setItem(wl.curLevel,1),wl.showScale(this.node.getChildByName("sucLayer"));else if(this.unschedule(this.startCountTime),audio.playEffect("click"),this.lbWinStep.string=this._step,0===l)this.lbWinTime.string=this._time,wl.showScale(this.node.getChildByName("winLayer"));else if(1===l){var t=wl.lv+1;ls.setItem(wl.curLevel,t),this.img1.active=!0,this.img1.zIndex=20,this.img1.runAction(cc.rotateBy(.1,50).repeatForever()),this.img1.runAction(cc.sequence(cc.scaleBy(1.1,3),cc.callFunc(function(){this.img1.stopAllActions(),this.img1.setRotation(0),this.img1.scale=1,this.img1.zIndex=-1,this.img1.active=!1,this.btnCallBack()},this)))}},removeNode:function(){for(var t=0;t<n;t++)for(var e=0;e<a;e++)this._mapArr[t][e]&&wl.destroyNode(this._mapArr[t][e]);var i=cc.loader.getDependsRecursively(this._texture);cc.loader.release(i)},updateLabel:function(){this.lbStep.string="0";var t=this.node.getChildByName("img");t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this._texture),0===l?(this.nodeArr[0].active=!0,this.nodeArr[1].active=!0,this.nodeArr[2].active=!1,this.lbTime.string=0,this._time=0,this.levelNode.active=!1,t.setPosition(200,510)):1===l&&(this.nodeArr[0].active=!1,this.nodeArr[1].active=!1,this.nodeArr[2].active=!0,this._time=h[wl.lv-1],this.lbDownCount.string=this._time,this.levelNode.active=!0,this.levelNode.getComponent(cc.Sprite).spriteFrame=this.levelPic[wl.lv-1],t.setPosition(-200,-446))},startCountTime:function(t){0===l?(this._time++,this.lbTime.string=this._time):1===l&&(this._time--,this.lbDownCount.string=this._time,this._time<=0&&(cc.log("失败"),this.unschedule(this.startCountTime),wl.showScale(this.node.getChildByName("failLayer")),this.failLvNum.getComponent(cc.Sprite).spriteFrame=this.levelNumPic[wl.lv-1]))},addListener:function(){var t=this;cc.eventManager.addCustomListener("ImagePickerEvent",function(e){var i=e.getUserData().p;c=i+"",cc.loader.load(c,function(e,i){t._texture=assets;var c=new cc.SpriteFrame(t._texture);t.helloNode.getComponent(cc.Sprite).spriteFrame=c})})},btnQuickStart:function(t){audio.playEffect("click"),this._isSyartGame!==!1&&(l=0,wl.lv=wl.getRandomInt(1,6),this.init())},btnLevelStart:function(t){audio.playEffect("click"),this._isSyartGame!==!1&&(l=1,this.init())},btnCallPlay:function(t){audio.playEffect("click"),this._isBeginGame=!0,this.node.getChildByName("startLayer").active=!1,this.schedule(this.startCountTime,1)},btnCallBack:function(t){audio.playEffect("click"),this.removeNode(),this.unschedule(this.startCountTime),this.node.getChildByName("homeLayer").active=!0},btnCallOpenPhoto:function(t){audio.playEffect("click"),cc.log("btnCallOpenPhoto"),cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(o,"openPhoto","()V")},btnCallOpenCamera:function(t){audio.playEffect("click"),cc.log("btnCallOpenCamera"),cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(o,"openCamera","()V")},btnCallSuc:function(t){audio.playEffect("click")},btnCallUpload:function(t){audio.playEffect("click"),this.uploadLayer.active=!0},btnCallUploadClose:function(t){audio.playEffect("click"),this.uploadLayer.active=!1},btnCallGrid9Sel:function(t){audio.playEffect("click"),t.target.active=!1,this.btnGrid16[1].active=!0,this.btnGrid9[1].active=!1,this.btnGrid9[0].active=!0,n=4,a=4},btnCallGrid9Nor:function(t){audio.playEffect("click"),this.btnGrid9[1].active=!0,this.btnGrid16[1].active=!1,this.btnGrid16[0].active=!0,n=3,a=3},btnCallGrid16Sel:function(t){audio.playEffect("click"),t.target.active=!1,this.btnGrid9[1].active=!0,this.btnGrid16[1].active=!1,this.btnGrid16[0].active=!0,n=3,a=3},btnCallGrid16Nor:function(t){audio.playEffect("click"),this.btnGrid16[1].active=!0,this.btnGrid9[1].active=!1,this.btnGrid9[0].active=!0,n=4,a=4}}),cc._RFpop()},{SceneBase:"SceneBase"}],SceneBase:[function(t,e,i){"use strict";cc._RFpush(e,"ddbd6Y8oehBhYrE1QQ1/+mG","SceneBase"),cc.Class({"extends":t("Base"),properties:{},onLoad:function(){this._super(),size=cc.winSize,wl.initData(),audio=cc.find("audio").getComponent("Audio"),this._loadBackstageEvent(),this.loadKeyboardEvent()},_loadBackstageEvent:function(){cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){}.bind(this)),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){}.bind(this))},removeListeners:function(){cc.eventManager.removeAllListeners()}}),cc._RFpop()},{Base:"Base"}],Start:[function(t,e,i){"use strict";cc._RFpush(e,"ec5d4Vh7YBOmZHLYnBYG122","Start"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],Tool:[function(t,e,i){"use strict";function c(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}cc._RFpush(e,"f3cb6tGsexIIoR2n+WJLwi2","Tool"),window.tool={copyArray:function(t){return[].concat(c(t))},setEnabled:function(t,e){t.setEnabled(e)},setSpritePic:function(t,e){cc.loader.loadRes(e,cc.SpriteFrame,function(e,i){t.getComponent(cc.Sprite).spriteFrame=i})},getNoRepeatNumber:function(t,e){for(var i=[],c=[],o=e-t+1,n=0;n<o;++n)i[n]=n+t;for(var a=o-1,s=0;s<o;++s){var r=Math.floor(Math.random()*(a+1));c[s]=i[r],i[r]=i[a],a--}return c},matrix:function(){var t=[],e=[],i=[],c=null,o=null,n=arguments[0],a=arguments[1];3==arguments.length?c=arguments[2]:4==arguments.length&&(o=arguments[2],c=arguments[3]);for(var s=0;s<n;s++){e=[];for(var r=0;r<a;r++)if(4==arguments.length){i=[];for(var l=0;l<o;l++)i[l]=c;e[r]=i}else e[r]=c;t[s]=e}return t},isContains:function(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1},isElement:function(t,e){var i=t.indexOf(e);return i>=0},sayHi:function(t){return"How are you, "+t+"?"},handleThings:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];cc.log(t)}},cc._RFpop()},{}],WL:[function(t,e,i){"use strict";cc._RFpush(e,"4aa75gzcMVOxq/qjEnirCnR","WL"),window.ls=cc.sys.localStorage,window.size=null,window.audio=null,window.wl={lv:1,curLevel:"curLevel",effectStatus:"effectStatus",musicStatus:"musicStatus",isShowLog:!0,game:"game",initData:function(){ls.getItem(wl.game)||(ls.setItem(wl.game,"true"),ls.setItem(wl.effectStatus,"true"),ls.setItem(wl.musicStatus,"true"),ls.setItem(wl.curLevel,1))},log:function(){if(wl.isShowLog!==!1){for(var t="#:",e=0;e<arguments.length;e++)t+=arguments[e]+";";cc.log(t)}},getItemInt:function(t){return parseInt(ls.getItem(t),10)},getItemFloat:function(t){return parseFloat(ls.getItem(t),10)},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},getRandomFloat:function(t,e){var i=Math.random()*(e-t+1)+t;return Math.floor(100*i)/100},destroyNode:function(t){t&&t.parent&&(t.parent.removeChild(t),t.destroy())},showScale:function(t){t.active=!0;var e=t.getChildByName("layerColor");e.setOpacity(0),e.runAction(cc.fadeTo(.5,160));var i=t.getChildByName("layer");i.scale=0,i.runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut()))},closeScale:function(t){var e=t.getChildByName("layerColor");e.runAction(cc.fadeTo(.25,0));var i=t.getChildByName("layer");i.runAction(cc.sequence(cc.scaleTo(.15,1.2,1.2),cc.scaleTo(.1,0,0),cc.callFunc(function(){t.active=!1},this)))},white:cc.color(255,255,255,255),yellow:cc.color(255,255,0,255),blue:cc.color(0,0,255,255),green:cc.color(0,255,0,255),red:cc.color(255,0,0,255),magenta:cc.color(255,0,255,255),black:cc.color(0,0,0,255),orange:cc.color(255,127,0,255),gray:cc.color(166,166,166,255)},cc._RFpop()},{}]},{},["Audio","WL","Gmae","Base","SceneBase","Start","Tool"]);